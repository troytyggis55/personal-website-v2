import{e as $,f as g,p as H,o as J,k as q,q as K,a as E,c as C,b as r,g as y,j as U,l as k,s as A,v as O,t as P}from"./index-8L-mZ_WY.js";import{_ as w}from"./ButtonToggle.vue_vue_type_script_setup_true_lang-D0TZmq_d.js";class Q{constructor(l,n,h,_,M){this.distanceFromStart=1/0,this.weightedDistanceFromStart=1/0,this.previous=null,this.state=l,this.x=n,this.y=h,this.isTop=h===0,this.isBottom=_,this.isLeft=n===0,this.isRight=M}getManhattenDistanceTo(l){return Math.abs(this.x-l.x)+Math.abs(this.y-l.y)}getEuclideanDistanceTo(l){return Math.sqrt(Math.pow(this.x-l.x,2)+Math.pow(this.y-l.y,2))}getAllNeighbors(l){const n=[];return!this.isLeft&&!this.isTop&&n.push(l[this.x-1][this.y-1]),this.isTop||n.push(l[this.x][this.y-1]),!this.isTop&&!this.isRight&&n.push(l[this.x+1][this.y-1]),this.isRight||n.push(l[this.x+1][this.y]),!this.isRight&&!this.isBottom&&n.push(l[this.x+1][this.y+1]),this.isBottom||n.push(l[this.x][this.y+1]),!this.isBottom&&!this.isLeft&&n.push(l[this.x-1][this.y+1]),this.isLeft||n.push(l[this.x-1][this.y]),n}getOrthogonalNeighbors(l){const n=[];return this.isTop||n.push(l[this.x][this.y-1]),this.isRight||n.push(l[this.x+1][this.y]),this.isBottom||n.push(l[this.x][this.y+1]),this.isLeft||n.push(l[this.x-1][this.y]),n}draw(l,n){l.fillStyle=this.state;const h=n.value;l.fillRect(this.x*h+1,this.y*h+1,h-1,h-1)}equals(l){return this.x===l.x&&this.y===l.y}}const Z={class:"flex flex-col gap-3 justify-center items-center"},tt={class:"flex flex-row gap-2 justify-center"},et={key:0,class:"flex flex-row flex-wrap gap-2 justify-center"},st={key:1,class:"flex flex-row flex-wrap gap-2 justify-center"},lt={class:"flex flex-col"},at=r("span",null,"Resolution",-1),ot={class:"flex flex-col"},nt=r("span",null,"Speed",-1),it={key:2,class:"flex flex-row flex-wrap gap-2 justify-center"},ut=r("option",{value:"manhatten",selected:""},"Manhatten",-1),rt=r("option",{value:"euclidean"},"Euclidean",-1),dt=[ut,rt],ht=r("option",{value:"dijkstra",selected:""},"Dijkstra",-1),ct=r("option",{value:"aStar"},"A*",-1),vt=r("option",{value:"greedy"},"Greedy A*",-1),ft=[ht,ct,vt],mt={key:0,class:"flex flex-row gap-2"},pt={class:"flex flex-col"},gt=r("span",null,"Strength",-1),xt={class:"flex flex-row gap-2 justify-center"},yt={class:"flex flex-col"},wt={class:"flex flex-col"},_t=r("canvas",{id:"pathfinding",class:"w-full max-w-md h-auto"},null,-1),D=500,St=$({__name:"DemoPathfinding",setup(z){const l=g(50),n=H(()=>D/l.value),h=g(50);let _,M;const x=g("aStar"),b=g("manhatten"),I=g(1),B=g(0),F=g(0),m=g("layout");let i;const c=g("gray");J(()=>{const e=document.getElementById("pathfinding"),s=e.getContext("2d");s.imageSmoothingEnabled=!1,e.width=D+1,e.height=D+1,j(),N();let t=!1,a=!1;const d=o=>{f(),T(e),o instanceof MouseEvent?L(e,o.clientX,o.clientY,c.value):L(e,o.touches[0].clientX,o.touches[0].clientY,c.value),t=!0,a=!0},v=()=>{t=!1,f(),R(e)},u=o=>{o.preventDefault(),t&&a&&(f(),T(e),o instanceof MouseEvent?L(e,o.clientX,o.clientY,c.value):L(e,o.touches[0].clientX,o.touches[0].clientY,c.value))};e.addEventListener("mousedown",d),e.addEventListener("touchstart",d),e.addEventListener("mouseenter",()=>{a=!0}),e.addEventListener("mouseleave",()=>{a=!1}),e.addEventListener("mouseup",v),e.addEventListener("touchend",v),e.addEventListener("mousemove",u),e.addEventListener("touchmove",u)});const f=()=>{clearInterval(_),clearInterval(M),_=void 0,M=void 0};q([l],()=>{f();const e=document.getElementById("pathfinding");e.width=D+1,e.height=D+1,j()}),q([h,x,b,I],()=>{f();const e=document.getElementById("pathfinding");T(e),R(e)});const j=()=>{f();const e=document.getElementById("pathfinding");i=Array.from({length:l.value},()=>Array.from({length:l.value},()=>null));const s=e.getContext("2d");s.fillStyle="rgb(70,70,70)",s.fillRect(0,0,e.width,e.height);for(let t=0;t<l.value;t++)for(let a=0;a<l.value;a++)i[t][a]=new Q("black",t,a,a===l.value-1,t===l.value-1),i[t][a].draw(s,n)},N=()=>{const e=document.getElementById("pathfinding"),s=e.getContext("2d");f(),T(e);for(let d=0;d<l.value;d++)for(let v=0;v<l.value;v++)i[d][v].state=Math.random()<.3?"gray":"black",i[d][v].draw(s,n);let t=Math.floor(Math.random()*l.value),a=Math.floor(Math.random()*l.value);i[t][a].state="blue",i[t][a].draw(s,n),t=Math.floor(Math.random()*l.value),a=Math.floor(Math.random()*l.value),i[t][a].state="red",i[t][a].draw(s,n),R(e)},R=e=>{var d,v;const s=(d=i.find(u=>u.find(o=>o.state==="blue")))==null?void 0:d.find(u=>u.state==="blue"),t=(v=i.find(u=>u.find(o=>o.state==="red")))==null?void 0:v.find(u=>u.state==="red");if(!s||!t)return;s.distanceFromStart=0;const a=[];a.push(s),_=setInterval(()=>{if(a.length===0){f();return}const u=a.shift();if(B.value=B.value+1,F.value=parseFloat(u.distanceFromStart.toFixed(2)),u.equals(t)){G(e,u),clearInterval(_);return}u.state=u===s?"blue":"yellow",u.draw(e.getContext("2d"),n);for(const o of b.value==="manhatten"?u.getOrthogonalNeighbors(i):u.getAllNeighbors(i)){if(o.state!=="black"&&o.state!=="red"&&o.state!=="purple")continue;o.state=o.state==="red"?"red":"purple",o.draw(e.getContext("2d"),n);let p=u.distanceFromStart+(b.value==="manhatten"?o.getManhattenDistanceTo(u):o.getEuclideanDistanceTo(u));p<o.distanceFromStart&&(o.distanceFromStart=p,o.weightedDistanceFromStart=p+(x.value==="aStar"||x.value==="greedy"?(b.value==="manhatten"?o.getManhattenDistanceTo(t):o.getEuclideanDistanceTo(t))*(x.value==="greedy"?I.value:1):0),o.previous=u,a.includes(o)||a.push(o))}a.sort((o,p)=>o.weightedDistanceFromStart-p.weightedDistanceFromStart||o.y-p.y||o.x-p.x)},1e3/h.value)},G=(e,s)=>{let t=s.previous;M=setInterval(()=>{if(!t){f();return}t.state=t.state==="blue"?"blue":"green",t.draw(e.getContext("2d"),n),t=t.previous},50)},T=e=>{B.value=0,F.value=0;const s=e.getContext("2d");s.fillStyle="rgb(70,70,70)",s.fillRect(0,0,e.width,e.height);for(let t=0;t<l.value;t++)for(let a=0;a<l.value;a++)(i[t][a].state==="yellow"||i[t][a].state==="purple"||i[t][a].state==="green")&&(i[t][a].state="black"),i[t][a].distanceFromStart=1/0,i[t][a].previous=null,i[t][a].draw(s,n)},L=(e,s,t,a)=>{const d=e.getBoundingClientRect();if(s<d.left||s+1>=d.right||t<d.top||t+1>=d.bottom)return;const v=e.width/d.width,u=e.height/d.height,o=(s-d.left)*v,p=(t-d.top)*u,X=Math.floor(o/n.value),Y=Math.floor(p/n.value);(a==="blue"||a==="red")&&(W=>{for(let V=0;V<l.value;V++)for(let S=0;S<l.value;S++)i[V][S].state===W&&(i[V][S].state="black",i[V][S].draw(e.getContext("2d"),n))})(a),i[X][Y].state=a,i[X][Y].draw(e.getContext("2d"),n)};return K(()=>{f()}),(e,s)=>(E(),C("div",Z,[r("div",tt,[y(w,{text:"Layout",value:"layout",modelValue:m.value,"onUpdate:modelValue":s[0]||(s[0]=t=>m.value=t)},null,8,["modelValue"]),y(w,{text:"Algorithm",value:"algo",modelValue:m.value,"onUpdate:modelValue":s[1]||(s[1]=t=>m.value=t)},null,8,["modelValue"]),y(w,{text:"Settings",value:"settings",modelValue:m.value,"onUpdate:modelValue":s[2]||(s[2]=t=>m.value=t)},null,8,["modelValue"])]),m.value==="layout"?(E(),C("div",et,[y(w,{value:"gray",text:"Wall",modelValue:c.value,"onUpdate:modelValue":s[3]||(s[3]=t=>c.value=t)},null,8,["modelValue"]),y(w,{value:"blue",text:"Start",modelValue:c.value,"onUpdate:modelValue":s[4]||(s[4]=t=>c.value=t)},null,8,["modelValue"]),y(w,{value:"red",text:"End",modelValue:c.value,"onUpdate:modelValue":s[5]||(s[5]=t=>c.value=t)},null,8,["modelValue"]),y(w,{value:"black",text:"Empty",modelValue:c.value,"onUpdate:modelValue":s[6]||(s[6]=t=>c.value=t)},null,8,["modelValue"]),r("button",{onClick:N,class:"p-2 border border-white"},"🎲"),r("button",{onClick:j,class:"p-2 border border-white"},"🗑️")])):U("",!0),m.value==="settings"?(E(),C("div",st,[r("div",lt,[at,k(r("input",{type:"range",min:"5",max:"50","onUpdate:modelValue":s[7]||(s[7]=t=>l.value=t)},null,512),[[A,l.value]])]),r("div",ot,[nt,k(r("input",{type:"range",min:"1",max:"200","onUpdate:modelValue":s[8]||(s[8]=t=>h.value=t)},null,512),[[A,h.value]])])])):U("",!0),m.value==="algo"?(E(),C("div",it,[k(r("select",{"onUpdate:modelValue":s[9]||(s[9]=t=>b.value=t)},dt,512),[[O,b.value]]),k(r("select",{"onUpdate:modelValue":s[10]||(s[10]=t=>x.value=t)},ft,512),[[O,x.value]]),x.value==="greedy"?(E(),C("div",mt,[r("div",pt,[gt,k(r("input",{type:"range",min:"1",max:"10","onUpdate:modelValue":s[11]||(s[11]=t=>I.value=t)},null,512),[[A,I.value]])])])):U("",!0)])):U("",!0),r("div",xt,[r("div",yt,[r("span",null,"Distance: "+P(F.value),1)]),r("div",wt,[r("span",null,"Searched: "+P(B.value),1)])]),_t]))}});export{St as _};
